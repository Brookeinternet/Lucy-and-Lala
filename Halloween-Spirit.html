<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lucy & Lalaâ€™s Spirit Halloween Adventure (Pro Holiday Exclusive)</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --pumpkin:#ff6a00;
      --candy:#ffb347;
      --ink:#0e0e0e;
      --cream:#fff6ea;
      --violet:#3a2a49;
    }
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 120% -10%, #0000, #0008 60%),
        linear-gradient(180deg, var(--violet) 0%, #1a1324 35%, #0f0a14 100%);
      color:#fff;
      font-family: "Quicksand", sans-serif;
      line-height:1.6;
    }
    .wrap{max-width:980px;margin:auto;padding:28px}
    header{text-align:center;padding:28px 16px 8px;}
    .title{
      font-family:"Creepster", cursive;
      font-size: clamp(40px, 7vw, 76px);
      color: var(--candy);
      text-shadow: 0 6px 0 #000, 0 0 22px #ffb347aa;
      margin:0 0 10px;
    }
    .sub{color:#ffdcbf;margin:0 0 8px;font-weight:600}
    .card{
      background: linear-gradient(180deg, #1b1423 0%, #0e0a12 100%);
      border: 1px solid #2b2037;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 12px 40px #0008, inset 0 1px 0 #ffffff0f;
      margin: 22px 0;
    }
    .card h2{
      font-family:"Creepster", cursive;
      font-size: clamp(28px, 4.5vw, 44px);
      color: var(--candy);
      margin: 16px;
      text-shadow: 0 2px 0 #000;
    }
    .card p{margin: 6px 16px 18px;color:#ffe9d6}
    figure{margin:0;text-align:center}
    img, video{display:inline-block;max-width:100%;height:auto;border-radius:10px}
    figcaption{
      padding:10px 16px 14px;font-size:14px;color:#e9d9ffcc;border-top:1px solid #291f36
    }
    .btn{
      display:inline-block;margin:12px 16px;padding:12px 18px;
      background:linear-gradient(90deg,var(--pumpkin),var(--candy));
      color:#2a1400;font-weight:800;text-decoration:none;border-radius:12px;
    }
    .pro-only {
      background:#2a1c38;
      border:2px dashed #ffb347;
      padding:20px;
      margin:30px 0;
      border-radius:14px;
      text-align:center;
    }
    .pro-only h2{
      color:#ffb347;
      font-family:"Creepster", cursive;
    }
    .locked {
      filter: blur(8px);
      pointer-events:none;
      user-select:none;
    }
    footer{text-align:center;color:#e7d2ffcc;padding:20px 8px}
  </style>
</head>
<body>
<body class="antialiased text-gray-600">
    <!-- Content Lock Script -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

       
        // Global variables for Firebase config and app ID
       const firebaseConfig = {
    apiKey: "AIzaSyBaVuIUd_iVRiR5LEeCoPtE0QphcxMLBQU",
    authDomain: "lucyandlala.firebaseapp.com",
    projectId: "lucyandlala",
    storageBucket: "lucyandlala.firebasestorage.app",
    messagingSenderId: "422161772278",
    appId: "1:422161772278:web:a39c41f9ad967d379886d7",
    measurementId: "G-JZJK3JWCKH"

        let app = null;
        let auth = null;
        let db = null;
        let currentUserId = null;

        // Initialize Firebase services only if config is available
        if (firebaseConfig && firebaseConfig.apiKey) {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase services initialized.");
        } else {
            console.warn("Firebase config not found. Authentication and Pro status will not be available.");
        }
        

        /**
         * Gets the current authenticated user's UID.
         * @returns {Promise<string|null>} The user's UID or null if not authenticated.
         */
        async function getAuthenticatedUserId() {
            if (!auth) return null;
            return new Promise(resolve => {
                const unsubscribe = onAuthStateChanged(auth, (user) => {
                    unsubscribe(); // Stop listening once we have a user
                    if (user) {
                        currentUserId = user.uid;
                        resolve(user.uid);
                    } else {
                        resolve(null);
                    }
                });
            });
        }

        /**
         * Fetches a user's subscriber status from Firestore.
         * @returns {Promise<boolean>} True if the user is a Pro Subscriber, false otherwise.
         */
        async function getProSubscriberStatus() {
            if (!db) return false;
            const userId = await getAuthenticatedUserId();

            if (!userId) {
                console.warn("Cannot get subscriber status: User not authenticated.");
                return false;
            }

            try {
                const userDocRef = doc(db, `artifacts/${appId}/users/${userId}/profile`, 'subscription');
                const docSnap = await getDoc(userDocRef);

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    return data.isProSubscriber === true;
                } else {
                    return false;
                }
            } catch (error) {
                console.error("Error fetching subscriber status:", error);
                return false;
            }
        }

        const releaseDate = new Date('2025-10-05T00:00:00'); 
        const currentDate = new Date();

        document.addEventListener('DOMContentLoaded', async () => {
            // Ensure Firebase Auth is ready before checking status
            if (auth) {
                 await new Promise(resolve => {
                    onAuthStateChanged(auth, (user) => {
                        if (user) {
                            currentUserId = user.uid;
                        } else {
                             // If no user is signed in, attempt anonymous or custom token sign-in
                            if (initialAuthToken) {
                                signInWithCustomToken(auth, initialAuthToken)
                                    .then((userCredential) => {
                                        console.log("Signed in with custom token:", userCredential.user.uid);
                                    })
                                    .catch((error) => {
                                        console.error("Error signing in with custom token:", error);
                                        signInAnonymously(auth)
                                            .then(() => console.log("Signed in anonymously (fallback)."))
                                            .catch(e => console.error("Error signing in anonymously:", e));
                                    });
                            } else {
                                signInAnonymously(auth)
                                    .then(() => console.log("Signed in anonymously."))
                                    .catch(e => console.error("Error signing in anonymously:", e));
                            }
                        }
                        resolve();
                    });
                });
            }

<div class="wrap">
  <header>
    <h1 class="title">Lucy & Lalaâ€™s Spirit Halloween Adventure</h1>
    <p class="sub">From adorable pumpkins to creepy monsters ðŸŽƒðŸ‘»</p>
  </header>

  <div class="pro-only">
    <h2>ðŸ”’ Pro Holiday Addâ€‘On Exclusive</h2>
    <p>This article is available only for <strong>Holiday Addâ€‘On</strong> subscribers. Unlock the full Halloween adventure for just <a href="https://buy.stripe.com/aFa28t0GQdok64p6oWabK04" target="_blank">$2</a>.</p>
    <p>If you are already a Pro member with Holiday access, enjoy the spooky fun below!</p>
  </div>

  <div class="locked">
    <!-- Baby & Toddler Costumes -->
    <div class="card">
      <figure class="hero">
        <img src="https://i.imgur.com/c5NFYzh.jpeg" alt="Lucy & Lala in pumpkin overalls at Spirit Halloween"/>
        <figcaption>Lucy & Lala in pumpkin overalls at Spirit Halloween</figcaption>
      </figure>
      <h2>ðŸŽƒ Baby & Toddler Costumes We Loved</h2>
      <p>From plush animal suits to tiny jackâ€‘oâ€™â€‘lantern rompers, the baby racks were stacked with irresistible picks...</p>
    </div>

    <!-- Scary Mask Adventure -->
    <div class="card">
      <figure>
        <img src="https://i.imgur.com/ZDSMoqZ.jpeg" alt="Lucy and Lala in pumpkin overalls in front of scary masks">
        <figcaption>Facing the spooky side of Spirit Halloweenâ€™s mask aisle.</figcaption>
      </figure>
      <h2>ðŸ˜± Spooky Mask Adventure</h2>
      <p>After browsing the adorable baby costumes, Lucy and Lala wandered into Spirit Halloweenâ€™s mask aisle...</p>
    </div>

    <!-- Wall of Frights -->
    <div class="card">
      <figure>
        <img src="https://i.imgur.com/2TNjMEJ.jpeg" alt="Lucy and Lala in pumpkin overalls in front of skeleton and ghoul masks">
        <figcaption>Lucy and Lala in front of the Wall of Frights at Spirit Halloween.</figcaption>
      </figure>
      <h2>ðŸ¦‡ The Wall of Frights</h2>
      <p>Behind Lucy and Lala stood a truly eerie display â€” the <em>Wall of Frights</em> at Spirit Halloween...</p>
    </div>

    <!-- Animatronics -->
    <div class="card">
      <figure>
        <video controls>
          <source src="https://i.imgur.com/Dfbigui.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <figcaption>The moment Lucy and Lala encountered the moving, talking animatronics.</figcaption>
      </figure>
      <h2>ðŸ‘€ Terrified of the Animations</h2>
      <p>Lucy and Lala had already braved creepy masks, but nothing prepared them for the Halloween animatronics aisle...</p>
    </div>
  </div>

  <footer>Â© 2025 Lucy & Lalaâ€™s Adventures â€” Halloween Special | Holiday Addâ€‘On Exclusive</footer>
</div>

</body>
</html>
